---
layout:     post
title:      "iOS数据存储"
subtitle:   "iOS数据存储相关"
date:       2019-02-26
author:     "袁平"
header-img: "img/tag-bg.jpg"
tags:
    - iOS
---

沙盒
Plist
Preference偏好设置
NSKeyedArchiver归档 / NSKeyedUnarchiver解档
SQLite3的使用
FMDB
Core Data
Realm: https://realm.io/cn/docs/swift/latest/


沙盒：

文件系统：
APFS是macOS, iOS, watchOS, 和tvOS的默认文件系统；从iOS 10.3及其之后，APFS就替代HFS+作为默认的文件系统

iOS App的沙盒目录如下
![](/img/post/iOS_Storage/iOS_App_SandBox.png)
应用程序通常不能在自己的沙盒之外进行文件操作，但是可以通过通过系统接口来获取信息，如通过系统接口获取联系人信息和音乐等

常用沙盒文件夹：

| 目录 | 详情 |
| --   | --   |
| AppName.app | App Bundle，该目录包括了app及其所有资源文件；用户拥有只读权限（无写权限），该目录在app安装时被签名，如果强行写入该目录会破坏该签名，使得应用无法启动；该文件目录下内容不会被iTunes或iCloud备份 | 
| Documents | 用于存储用户生成的文件，该目录下的文件可以共享给其他用户；该文件目录下内容会被iTunes和iCloud备份 |
| Documens/Inbox | 用来保存由外部应用请求当前应用程序打开的文件；应用程序可以读取和删除该目录下文件，但是无法创建新文件和写入已经存在的文件；该目录下内容会被iTunes和iCloud备份 |
| Library | 用于存储非用户数据的文件，可以将不想暴露给用户的数据存储在该目录下；该目录下有一个Caches子目录，用于缓存，以及一个Application Supportm目录，用于存储应用生成的一些文件，如配置文件等；该目录下内容（除了Caches下内容外）会被iTunes和iCloud备份 |
| temp | 用于存储临时文件，当应用程序没有运行时，该目录下内容可能会被系统清空；该目录下内容不会被iTunes或iCloud备份 |

**备注：Bundle**：bundle是将可执行程序代码和相关资源文件（如图片，声音等）组合在一起的一个文件目录；在iOS和OS X中，应用程序，frameworks，插件和其他形式的软件都是bundle（应用程序是第三方开发者能够在iOS上创建的唯一bundle）；使用bundle可以使安装和定位应用程序更加方便，同时方便做国际化(bundle目录结构如下图)；每个应用程序都有一个main bundle，可以通过NSBundle来获取

![](/img/post/iOS_Storage/bundle.png)

